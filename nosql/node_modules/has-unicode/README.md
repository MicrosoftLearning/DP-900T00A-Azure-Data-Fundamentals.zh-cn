---
ms.openlocfilehash: ace56f38c5b7a359fa99a9338a7d93a85a1d24ab
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050471"
---
<a name="has-unicode"></a>has-unicode
===========

尝试猜测终端是否支持 Unicode

```javascript
var hasUnicode = require("has-unicode")

if (hasUnicode()) {
  // the terminal probably has unicode support
}
```
```javascript
var hasUnicode = require("has-unicode").tryHarder
hasUnicode(function(unicodeSupported) {
  if (unicodeSupported) {
    // the terminal probably has unicode support
  }
})
```

## <a name="detecting-unicode"></a>检测 Unicode

实际检测的是 UTF-8 支持，因为这就是 Node 本身支持的内容。
如果具备 UTF-16 区域设置，将不会检测到支持 Unicode。

### <a name="windows"></a>Windows

至少从 Windows 7 开始，`cmd` 和 `powershell` 已经支持 Unicode，但不幸的是即使这样也不能保证。 在许多本地化版本中，它仍然使用旧代码页，并且除了运行程序或链接 C++ 之外，没有任何设施可以让我们检测到这一点。 因此，我们将所有 Windows 安装报告为不支持 Unicode，并建议你鼓励用户通过配置替代此选项。

### <a name="unix-like-operating-systems"></a>类似 Unix 的操作系统

我们按此顺序查看环境变量 `LC_ALL`、`LC_CTYPE` 和 `LANG`。  对于 `LC_ALL` 和 `LANG`，是在值中查找 `.UTF-8`。 对于 `LC_CTYPE`，则是查看值是否为 `UTF-8`。  这足以满足大多数 POSIX 系统的需求。  虽然区域设置数据也可以放入 `/etc/locale.conf`，但 AFAIK 始终会复制到环境中。

