---
ms.openlocfilehash: 1997c778eb616617ba9d369f6a27828bf83af8b8
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050465"
---
Node 的 ini 格式分析器和序列化程序。

节被视为嵌套对象。  第一个标题前面的项直接保存在对象上。

## <a name="usage"></a>使用情况

以一个如下所示的 ini 文件 `config.ini` 为例：

    ; this comment is being ignored
    scope = global

    [database]
    user = dbuser
    password = dbpassword
    database = use_this_database

    [paths.default]
    datadir = /var/lib/data
    array[] = first value
    array[] = second value
    array[] = third value

可按如下所示读取、操作和写入 ini 文件：

    var fs = require('fs')
      , ini = require('ini')

    var config = ini.parse(fs.readFileSync('./config.ini', 'utf-8'))

    config.scope = 'local'
    config.database.database = 'use_another_database'
    config.paths.default.tmpdir = '/tmp'
    delete config.paths.default.datadir
    config.paths.default.array.push('fourth value')

    fs.writeFileSync('./config_modified.ini', ini.stringify(config, { section: 'section' }))

这将导致一个名为 `config_modified.ini` 的文件被写入文件系统，其内容如下：

    [section]
    scope=local
    [section.database]
    user=dbuser
    password=dbpassword
    database=use_another_database
    [section.paths.default]
    tmpdir=/tmp
    array[]=first value
    array[]=second value
    array[]=third value
    array[]=fourth value


## <a name="api"></a>API

### <a name="decodeinistring"></a>decode(inistring)

将格式为 ini 样式的 `inistring` 解码为嵌套对象。

### <a name="parseinistring"></a>parse(inistring)

`decode(inistring)` 的别名

### <a name="encodeobject-options"></a>encode(object, [options])

将对象 `object` 编码为格式为 ini 样式的字符串。 如果提供了可选参数 `section`，则对象的所有顶级属性都将放入此节，并且 `section` 字符串将添加到所有子节，请参阅上面的用法示例。

`options` 对象可能包含以下项：

* `section` 一个字符串，它将成为编码的 ini 数据中的第一个 `section`。  默认为“无”。
* `whitespace` 布尔值，用于指格定是否在 `=` 字符周围放置空。  默认会省略空格，这样可以方便一些不容忍空格的旧分析器。  但一些人发现有了空格更易于阅读，看上去也更整洁。

出于向后兼容性方面的原因，如果传入一个 `string` 选项，则假定它是 `section` 值。

### <a name="stringifyobject-options"></a>stringify(object, [options])

`encode(object, [options])` 的别名

### <a name="safeval"></a>safe(val)

转义字符串 `val`，以便安全地用作 ini 文件中的键或值。 本质上是转义引号。 例如

    ini.safe('"unsafe string"')

将生成

    "\"unsafe string\""

### <a name="unsafeval"></a>unsafe(val)

取消转义字符串 `val`
