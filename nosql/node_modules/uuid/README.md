---
ms.openlocfilehash: c6dc9b216d8255c51f2dc575a7c59dce25deff9e
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050501"
---
<!--
  -- This file is auto-generated from README_js.md. Changes should be made there.
  -->

# <a name="uuid-cihttpsgithubcomuuidjsuuidactionsqueryworkflow3aci-browserhttpsgithubcomuuidjsuuidactionsqueryworkflow3abrowser"></a>uuid [![CI](https://github.com/uuidjs/uuid/workflows/CI/badge.svg)](https://github.com/uuidjs/uuid/actions?query=workflow%3ACI) [![Browser](https://github.com/uuidjs/uuid/workflows/Browser/badge.svg)](https://github.com/uuidjs/uuid/actions?query=workflow%3ABrowser)

创建 [RFC4122](http://www.ietf.org/rfc/rfc4122.txt) UUID

- 完成 - 对 RFC4122 版本 1、3、4 和 5 UUID 的支持
- 跨平台 - 支持...
  - CommonJS、[ECMAScript 模块](#ecmascript-modules)和 [CDN 生成](#cdn-builds)
  - 节点 8、10、12、14
  - Chrome、Safari、Firefox、Microsoft Edge、IE 11 浏览器
  - Webpack 和 rollup.js 模块捆绑程序
  - [React Native / Expo](#react-native--expo)
- 安全 - 加密强度高的随机值
- 小 - 无依赖项，占用空间小，可以很好地与“摇树”包配合使用
- CLI - 包括 [`uuid` 命令行](#command-line) 实用工具

升级自 `uuid@3.x`？ 代码可能没问题，但请查看[升级自 `uuid@3.x`](#upgrading-from-uuid3x) 了解详细信息。

## <a name="quickstart"></a>快速入门

若要创建随机 UUID...

**1.安装**

```shell
npm install uuid
```

**2.创建 UUID（ES6 模块语法）**

```javascript
import { v4 as uuidv4 } from 'uuid';
uuidv4(); // ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'
```

...或使用 CommonJS 语法：

```javascript
const { v4: uuidv4 } = require('uuid');
uuidv4(); // ⇨ '1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'
```

对于时间戳 UUID、命名空间 UUID 和其他选项，请继续阅读...

## <a name="api-summary"></a>API 摘要

|  |  |  |
| --- | --- | --- |
| [`uuid.NIL`](#uuidnil) | nil UUID 字符串（全为零） | `uuid@8.3` 中的新增功能 |
| [`uuid.parse()`](#uuidparsestr) | 将 UUID 字符串转换为字节数组 | `uuid@8.3` 中的新增功能 |
| [`uuid.stringify()`](#uuidstringifyarr-offset) | 将字节数组转换为 UUID 字符串 | `uuid@8.3` 中的新增功能 |
| [`uuid.v1()`](#uuidv1options-buffer-offset) | 创建版本 1（时间戳）UUID |  |
| [`uuid.v3()`](#uuidv3name-namespace-buffer-offset) | 创建版本 3（命名空间，带 MD5）UUID |  |
| [`uuid.v4()`](#uuidv4options-buffer-offset) | 创建版本 4（随机）UUID |  |
| [`uuid.v5()`](#uuidv5name-namespace-buffer-offset) | 创建版本 5（命名空间，带 SHA-1）UUID |  |
| [`uuid.validate()`](#uuidvalidatestr) | 测试字符串，检查其是否为有效 UUID | `uuid@8.3` 中的新增功能 |
| [`uuid.version()`](#uuidversionstr) | 检测 UUID 的 RFC 版本 | `uuid@8.3` 中的新增功能 |

## <a name="api"></a>API

### <a name="uuidnil"></a>uuid.NIL

nil UUID 字符串（全为零）。

示例：

```javascript
import { NIL as NIL_UUID } from 'uuid';

NIL_UUID; // ⇨ '00000000-0000-0000-0000-000000000000'
```

### <a name="uuidparsestr"></a>uuid.parse(str)

将 UUID 字符串转换为字节数组

|           |                                          |
| --------- | ---------------------------------------- |
| `str`     | 有效的 UUID `String`                    |
| _返回_ | `Uint8Array[16]`                         |
| _引发_  | `TypeError`（如果 `str` 不是有效的 UUID） |

注意：`parse()` 和 `stringify()` 使用的字节数组中值的排序遵循 UUID 字符串中十六进制对的左 &Rarr; 右顺序。 如以下示例所示。

示例：

```javascript
import { parse as uuidParse } from 'uuid';

// Parse a UUID
const bytes = uuidParse('6ec0bd7f-11c0-43da-975e-2a8ad9ebae0b');

// Convert to hex strings to show byte order (for documentation purposes)
[...bytes].map((v) => v.toString(16).padStart(2, '0')); // ⇨ 
  // [
  //   '6e', 'c0', 'bd', '7f',
  //   '11', 'c0', '43', 'da',
  //   '97', '5e', '2a', '8a',
  //   'd9', 'eb', 'ae', '0b'
  // ]
```

### <a name="uuidstringifyarr-offset"></a>uuid.stringify(arr[, offset])

将字节数组转换为 UUID 字符串

|                |                                                                              |
| -------------- | ---------------------------------------------------------------------------- |
| `arr`          | 类似于 `Array` 的 16 个值的集合（从 `offset` 开始），介于 0-255 之间。 |
| [`offset` = 0] | `Number` 数组中的起始索引                                         |
| _返回_      | `String`                                                                     |
| _引发_       | `TypeError`（如果无法生成有效的 UUID 字符串）                       |

注意：`parse()` 和 `stringify()` 使用的字节数组中值的排序遵循 UUID 字符串中十六进制对的左 &Rarr; 右顺序。 如以下示例所示。

例如：

```javascript
import { stringify as uuidStringify } from 'uuid';

const uuidBytes = [
  0x6e,
  0xc0,
  0xbd,
  0x7f,
  0x11,
  0xc0,
  0x43,
  0xda,
  0x97,
  0x5e,
  0x2a,
  0x8a,
  0xd9,
  0xeb,
  0xae,
  0x0b,
];

uuidStringify(uuidBytes); // ⇨ '6ec0bd7f-11c0-43da-975e-2a8ad9ebae0b'
```

### <a name="uuidv1options-buffer-offset"></a>uuid.v1([options[, buffer[, offset]]])

创建 RFC 版本 1（时间戳）UUID

|  |  |
| --- | --- |
| [`options`] | `Object`，具有以下一项或多项属性： |
| [`options.node` ] | RFC“节点”字段，作为字节值的 `Array[6]`（根据 4.1.6） |
| [`options.clockseq`] | RFC“时钟序列”，作为 0 - 0x3fff 之间的 `Number` |
| [`options.msecs`] | RFC“时间戳”字段（毫秒的 `Number`，unix 时期） |
| [`options.nsecs`] | RFC“时间戳”字段（添加到 `msecs` 的纳秒的 `Number`，应为 0-10,000） |
| [`options.random`] | 16 个随机字节的 `Array` (0-255) |
| [`options.rng`] | `options.random` 的替代项，一个返回 16 个随机字节 (0-255) `Array` 的 `Function` |
| [`buffer`] | `Array \| Buffer` 如果指定，uuid 将以字节形式写入此处，从 `offset` 开始 |
| [`offset` = 0] | `Number` 开始在 `buffer` 中写入 UUID 字节的索引 |
| _返回_ | 如果未指定 `buffer`，则返回 UUID `String`，否则返回 `buffer` |
| _引发_ | `Error`（如果请求超过 10M UUID/秒） |

注意：默认的 [node id](https://tools.ietf.org/html/rfc4122#section-4.1.6)（UUID 中的最后 12 位）在进程启动时随机生成一次，并在整个过程中保持不变。

备注：`options.random` 和 `options.rng` 仅在第一次调用 `v1()` 时有意义，其中它们可传递来初始化内部 `node` 和 `clockseq` 字段。

例如：

```javascript
import { v1 as uuidv1 } from 'uuid';

uuidv1(); // ⇨ '2c5ea4c0-4067-11e9-8bad-9b1deb4d3b7d'
```

使用 `options` 的示例：

```javascript
import { v1 as uuidv1 } from 'uuid';

const v1options = {
  node: [0x01, 0x23, 0x45, 0x67, 0x89, 0xab],
  clockseq: 0x1234,
  msecs: new Date('2011-11-01').getTime(),
  nsecs: 5678,
};
uuidv1(v1options); // ⇨ '710b962e-041c-11e1-9234-0123456789ab'
```

### <a name="uuidv3name-namespace-buffer-offset"></a>uuid.v3(name, namespace[, buffer[, offset]])

创建 RFC 版本 3（命名空间，带 MD5）UUID

API 与 `v5()` 相同，但改用“v3”。

&#x26a0;&#xfe0f; Note:根据 RFC，“如果不存在后向兼容性问题，则首选 SHA-1 [版本 5]。”

### <a name="uuidv4options-buffer-offset"></a>uuid.v4([options[, buffer[, offset]]])

创建 RFC 版本 4（随机）UUID

|  |  |
| --- | --- |
| [`options`] | `Object`，具有以下一项或多项属性： |
| [`options.random`] | 16 个随机字节的 `Array` (0-255) |
| [`options.rng`] | `options.random` 的替代项，一个返回 16 个随机字节 (0-255) `Array` 的 `Function` |
| [`buffer`] | `Array \| Buffer` 如果指定，uuid 将以字节形式写入此处，从 `offset` 开始 |
| [`offset` = 0] | `Number` 开始在 `buffer` 中写入 UUID 字节的索引 |
| _返回_ | 如果未指定 `buffer`，则返回 UUID `String`，否则返回 `buffer` |

例如：

```javascript
import { v4 as uuidv4 } from 'uuid';

uuidv4(); // ⇨ '1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'
```

使用预定义 `random` 值的示例：

```javascript
import { v4 as uuidv4 } from 'uuid';

const v4options = {
  random: [
    0x10,
    0x91,
    0x56,
    0xbe,
    0xc4,
    0xfb,
    0xc1,
    0xea,
    0x71,
    0xb4,
    0xef,
    0xe1,
    0x67,
    0x1c,
    0x58,
    0x36,
  ],
};
uuidv4(v4options); // ⇨ '109156be-c4fb-41ea-b1b4-efe1671c5836'
```

### <a name="uuidv5name-namespace-buffer-offset"></a>uuid.v5(name, namespace[, buffer[, offset]])

创建 RFC 版本 5（命名空间，带 SHA-1）UUID

|  |  |
| --- | --- |
| `name` | `String \| Array` |
| `namespace` | `String \| Array[16]` 命名空间 UUID |
| [`buffer`] | `Array \| Buffer` 如果指定，uuid 将以字节形式写入此处，从 `offset` 开始 |
| [`offset` = 0] | `Number` 开始在 `buffer` 中写入 UUID 字节的索引 |
| _返回_ | 如果未指定 `buffer`，则返回 UUID `String`，否则返回 `buffer` |

注意：RFC `DNS` 和 `URL` 命名空间可用作 `v5.DNS` 和 `v5.URL`。

使用自定义命名空间的示例：

```javascript
import { v5 as uuidv5 } from 'uuid';

// Define a custom namespace.  Readers, create your own using something like
// https://www.uuidgenerator.net/
const MY_NAMESPACE = '1b671a64-40d5-491e-99b0-da01ff1f3341';

uuidv5('Hello, World!', MY_NAMESPACE); // ⇨ '630eb68f-e0fa-5ecc-887a-7c7a62614681'
```

使用 RFC `URL` 命名空间的示例：

```javascript
import { v5 as uuidv5 } from 'uuid';

uuidv5('https://www.w3.org/', uuidv5.URL); // ⇨ 'c106a26a-21bb-5538-8bf2-57095d1976c1'
```

### <a name="uuidvalidatestr"></a>uuid.validate(str)

测试字符串，检查其是否为有效 UUID

|           |                                                     |
| --------- | --------------------------------------------------- |
| `str`     | 要验证的 `String`                                |
| _返回_ | 如果字符串是有效的 UUID，则返回 `true`，否则返回 `false` |

例如：

```javascript
import { validate as uuidValidate } from 'uuid';

uuidValidate('not a UUID'); // ⇨ false
uuidValidate('6ec0bd7f-11c0-43da-975e-2a8ad9ebae0b'); // ⇨ true
```

通过结合使用 `validate` 和 `version`，可根据版本进行验证，例如仅针对 v4 UUId 进行验证。

```javascript
import { version as uuidVersion } from 'uuid';
import { validate as uuidValidate } from 'uuid';

function uuidValidateV4(uuid) {
  return uuidValidate(uuid) && uuidVersion(uuid) === 4;
}

const v1Uuid = 'd9428888-122b-11e1-b85c-61cd3cbb3210';
const v4Uuid = '109156be-c4fb-41ea-b1b4-efe1671c5836';

uuidValidateV4(v4Uuid); // ⇨ true
uuidValidateV4(v1Uuid); // ⇨ false
```

### <a name="uuidversionstr"></a>uuid.version(str)

检测 UUID 的 RFC 版本

|           |                                          |
| --------- | ---------------------------------------- |
| `str`     | 有效的 UUID `String`                    |
| _返回_ | `Number` UUID 的 RFC 版本     |
| _引发_  | `TypeError`（如果 `str` 不是有效的 UUID） |

示例：

```javascript
import { version as uuidVersion } from 'uuid';

uuidVersion('45637ec4-c85f-11ea-87d0-0242ac130003'); // ⇨ 1
uuidVersion('6ec0bd7f-11c0-43da-975e-2a8ad9ebae0b'); // ⇨ 4
```

## <a name="command-line"></a>命令行

可以使用 `uuid` 从命令行生成 UUID。

```shell
$ uuid
ddeb27fb-d9a0-4624-be4d-4615062daed4
```

默认生成版本 4 UUIDS，但是支持其他版本。 输入 `uuid --help` 可了解详细信息：

```shell
$ uuid --help

Usage:
  uuid
  uuid v1
  uuid v3 <name> <namespace uuid>
  uuid v4
  uuid v5 <name> <namespace uuid>
  uuid --help

Note: <namespace uuid> may be "URL" or "DNS" to use the corresponding UUIDs
defined by RFC4122
```

## <a name="ecmascript-modules"></a>ECMAScript 模块

此库附带 [ECMAScript 模块](https://www.ecma-international.org/ecma-262/6.0/#sec-modules) (ESM) 支持 Node.js 版本（[示例](./examples/node-esmodules/)）以及捆绑程序，例如 [rollup.js](https://rollupjs.org/guide/en/#tree-shaking)（[示例](./examples/browser-rollup/)）和 [webpack](https://webpack.js.org/guides/tree-shaking/) （[示例](./examples/browser-webpack/)）（针对 Node.js 和浏览器环境）。

```javascript
import { v4 as uuidv4 } from 'uuid';
uuidv4(); // ⇨ '1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'
```

若要运行示例，必须先在模块根目录中创建此库的 dist 生成：

```shell
npm run build
```

## <a name="cdn-builds"></a>CDN 生成

### <a name="ecmascript-modules"></a>ECMAScript 模块

如需将此模块直接加载到[支持加载 ECMAScript 模块](https://caniuse.com/#feat=es6-module)的新式浏览器，可以使用 [jspm](https://jspm.org/)：

```html
<script type="module">
  import { v4 as uuidv4 } from 'https://jspm.dev/uuid';
  console.log(uuidv4()); // ⇨ '1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'
</script>
```

### <a name="umd"></a>UMD

若要将此模块直接加载到较旧的浏览器中，可以使用以下任一 CDN 中的 [UMD（通用模块定义）](https://github.com/umdjs/umd)生成：

**使用 [UNPKG](https://unpkg.com/uuid@latest/dist/umd/)** ：

```html
<script src="https://unpkg.com/uuid@latest/dist/umd/uuidv4.min.js"></script>
```

**使用 [jsDelivr](https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/)** ：

```html
<script src="https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv4.min.js"></script>
```

**使用 [cdnjs](https://cdnjs.com/libraries/uuid)** ：

```html
<script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js"></script>
```

这些 CDN 都提供相同的 [`uuidv4()`](#uuidv4options-buffer-offset) 方法：

```html
<script>
  uuidv4(); // ⇨ '55af1e37-0734-46d8-b070-a1e42e4fc392'
</script>
```

其他算法的方法（[`uuidv1()`](#uuidv1options-buffer-offset)、[`uuidv3()`](#uuidv3name-namespace-buffer-offset) 和 [`uuidv5()`](#uuidv5name-namespace-buffer-offset)）可分别通过文件 `uuidv1.min.js`、`uuidv3.min.js` 和 `uuidv5.min.js` 获取。

## <a name="getrandomvalues-not-supported"></a>"getRandomValues() not supported"

此错误在不支持标准 [`crypto.getRandomValues()`](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues) API 的环境中发生。 可以通过添加适当的 polyfill 来解决此问题：

### <a name="react-native--expo"></a>React Native / Expo

1. 安装 [`react-native-get-random-values`](https://github.com/LinusU/react-native-get-random-values#readme)
1. 在 `uuid` 之前导入它。 由于 `uuid` 可能还显示为一些其他导入的可传递依赖项，因此最好只是导入 `react-native-get-random-values`，将这作为入口点的第一件事：

```javascript
import 'react-native-get-random-values';
import { v4 as uuidv4 } from 'uuid';
```

注意：如果使用 Expo，则必须至少使用 `react-native-get-random-values@1.5.0` 和 `expo@39.0.0`。

### <a name="web-workers--service-workers-edge--18"></a>Web 工作进程 / 服务工作进程 (Edge <= 18)

[在 Edge <= 18 中，Web Crypto 在 Web 工作进程或服务工作进程中不受支持](https://caniuse.com/#feat=cryptography)，并且我们没有注意到 polyfill（如果你发现有，请告知我们）。

## <a name="upgrading-from-uuid7x"></a>升级自 `uuid@7.x`

### <a name="only-named-exports-supported-when-using-with-nodejs-esm"></a>仅在与 Node.js ESM 结合使用时支持命名导出

`uuid@7.x` 没有附带对 Node.js 的本机 ECMAScript 模块 (ESM) 支持。 在 Node.js ESM 中导入它后，会导入具有默认导出的 CommonJS 源。 此库现在随附真正的 Node.js ESM 支持，并且仅提供命名导出。

而不是执行以下操作：

```javascript
import uuid from 'uuid';
uuid.v4();
```

现在必须使用命名导出：

```javascript
import { v4 as uuidv4 } from 'uuid';
uuidv4();
```

### <a name="deep-requires-no-longer-supported"></a>深度要求不再受支持

深度要求（例如[ `uuid@7.x` 中已弃用](#deep-requires-now-deprecated)的 `require('uuid/v4')`）不再受支持。

## <a name="upgrading-from-uuid3x"></a>升级自 `uuid@3.x`

“_等一下... `uuid@4.x` - `uuid@6.x` 怎么了？！？_ ”

为了避免与 RFC [版本 4](#uuidv4options-buffer-offset) 和[版本 5](#uuidv5name-namespace-buffer-offset) UUID 以及可能的[版本 6](http://gh.peabody.io/uuidv6/) 混淆，此模块的 4 至 6 版本已被跳过。

### <a name="deep-requires-now-deprecated"></a>深度要求现已弃用

`uuid@3.x` 建议使用深度要求来最大程度地减少浏览器内部版本的捆绑大小：

```javascript
const uuidv4 = require('uuid/v4'); // <== NOW DEPRECATED!
uuidv4();
```

从 `uuid@7.x` 开始，此库现在提供 ECMAScript 模块生成，这些生成支持 Webpack 和 Rollup 等打包程序执行“树摇”来删除死代码。 改用 `import` 语法：

```javascript
import { v4 as uuidv4 } from 'uuid';
uuidv4();
```

... or for CommonJS:

```javascript
const { v4: uuidv4 } = require('uuid');
uuidv4();
```

### <a name="default-export-removed"></a>默认导出已删除

`uuid@3.x` 将版本 4 UUID 方法导出为默认导出：

```javascript
const uuid = require('uuid'); // <== REMOVED!
```

此使用模式已在 `uuid@3.x` 中被阻止，且已在 `uuid@7.x` 中删除。

----
Markdown 通过 [README_js.md](README_js.md) 由 [![RunMD Logo](http://i.imgur.com/h0FVyzU.png)](https://github.com/broofa/runmd) 生成