---
ms.openlocfilehash: 62ec6880a3e3b2a52d60ca46578b47a88379c266
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050598"
---
# <a name="detect-libc"></a>detect-libc

Node.js 模块，用于检测在给定 Linux 系统上使用的 C 标准库 (libc) 实现系列和版本。

提供一个适合 [prebuild](https://www.npmjs.com/package/prebuild)、[prebuild-ci](https://www.npmjs.com/package/prebuild-ci) 和 [prebuild-install](https://www.npmjs.com/package/prebuild-install) 选项的 `LIBC` 值，从而允许为基于 musl 的 Linux（例如 Alpine）和基于 glibc 的 Linux 生成和预配预编译的二进制文件。

目前支持 `glibc` 和 `musl` 的 libc 检测。

## <a name="install"></a>安装

```sh
npm install detect-libc
```

## <a name="usage"></a>使用情况

### <a name="api"></a>API

```js
const { GLIBC, MUSL, family, version, isNonGlibcLinux } = require('detect-libc');
```

* `GLIBC` 是一个字符串，包含值“glibc”，用于与 `family` 进行比较。
* `MUSL` 是一个字符串，包含值“musl”，用于与 `family` 进行比较。
* `family` 是表示系统 libc 系列的字符串。
* `version` 是表示系统 libc 版本号的字符串。
* `isNonGlibcLinux` 是一个布尔值，表示系统是否为一个非 glibc Linux，例如 Alpine。

### <a name="detect-libc-command-line-tool"></a>detect-libc 命令行工具

在具有非 glibc libc 的 Linux 系统上运行子命令时，`LIBC` 环境变量将设置为相关的值。

在所有其他平台上，将按原样运行子命令。

命令行功能需要 Node v0.12+ 提供的 `spawnSync`。

```sh
detect-libc child-command
```

## <a name="integrating-with-prebuild"></a>与预生成集成

```json
  "scripts": {
    "install": "detect-libc prebuild-install || node-gyp rebuild",
    "test": "mocha && detect-libc prebuild-ci"
  },
  "dependencies": {
    "detect-libc": "^1.0.2",
    "prebuild-install": "^2.2.0"
  },
  "devDependencies": {
    "prebuild": "^6.2.1",
    "prebuild-ci": "^2.2.3"
  }
```

## <a name="licence"></a>许可证

版权所有 2017 Lovell Fuller

已获得 Apache 许可证版本 2.0（“许可证”）许可；不得在不符合许可证要求的情况下使用此文件。
你可以获得一份许可证副本，网址是：[http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0.html)

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.
